<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Layout</title>
  <link ref="stylesheet" src="/css/style.css" />
  <link rel="stylesheet" href="/dist/output.css">
</head>

<body>
  <!--Como ponerle titulo sin que se me desconfigure todo-->
  <div class="formbold-main-wrapper">

    <!-------------------------------Parametros------------------------------->
    <div class="formbold-form-wrapper">
      <form action="/signup" method="post" enctype="multipart/form-data">
        <%- include('partials/message') %>
          <div class="formbold-steps">
            <ul>
              <li class="formbold-step-menu1 active">
                <span>1</span>
                Personal
              </li>
              <li class="formbold-step-menu2">
                <span>2</span>
                Documents
              </li>
              <li class="formbold-step-menu3">
                <span>3</span>
                Confirm
              </li>
            </ul>
          </div>
          <!-------------------------------Fin Parametros------------------------------->
          <!-------------------------------inicio Primera parte Datos personales------------------------------->
          <div class="formbold-form-step-1 active">
            <div class="formbold-input-flex">
              <div>
                <label for="name" class="formbold-form-label"> Name </label>
                <input type="text" name="name" placeholder="Andrio" id="nameInput" onblur="notNullname()"
                  onkeydown="checkTab(event)" class="formbold-form-input" onpaste="return false"
                  onkeypress="return (event.charCode == 32 || event.charCode == 209 || event.charCode == 241 || (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122))"
                  required />
                <!-- Mensaje de error si el campo está vacío -->
                <p id="nameErrores" class="text-red-500 text-xs mt-1 hidden">
                  Please enter a valid Name.
                </p>
              </div>
              <div>
                <label for="lastname" class="formbold-form-label">
                  Last name
                </label>
                <input type="text" name="lastname" placeholder="Dolee" id="lastnameInput" onblur="notNullLastname()"
                  onkeypress="return (event.charCode == 32 || event.charCode == 209 || event.charCode == 241 || (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122))"
                  onkeydown="checkTab(event)" class="formbold-form-input" onpaste="return false" required />
                <!-- Mensaje de error si el campo está vacío -->
                <p id="lastnameErrores" class="text-red-500 text-xs mt-1 hidden">
                  Please enter a valid lastname.
                </p>
              </div>

              <div>
                <label for="tel" class="formbold-form-label">Phone Number</label>
                <input type="tel" name="tel" placeholder="10 Digits" id="phoneInput" class="formbold-form-input"
                  onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" maxlength="10" required
                  onchange="validatePhone()" onpaste="return false" onkeydown="checkTab(event)" />
                <!-- Mensaje de error si el número no es válido -->
                <p id="phoneError" class="text-red-500 text-xs mt-1 hidden">
                  Please enter a valid number.
                </p>
              </div>
            </div>

            <div class="formbold-input-flex">
              <div>
                <label for="curp" class="formbold-form-label"> CURP </label>
                <input type="text" name="curp" id="curp" placeholder="18 digits"
                  onkeypress="return (event.charCode == 209 || event.charCode == 241 || (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122) || (event.charCode >= 48 && event.charCode <= 57))"
                  onblur="validateCurp()" onfocus="clearCurpError()" class="formbold-form-input" maxlength="18"
                  onpaste="return false" required />
                <p id="curpError" class="text-red-500 text-xs mt-1 hidden">
                  Please enter a valid CURP with 18 characters.
                </p>
              </div>

              <div>
                <label for="municipio" class="formbold-form-label">
                  Municipio
                </label>
                <select type="text" name="municipio" id="municipio" placeholder="Delicias" class="formbold-form-input"
                  required>
                  <% municipio.forEach(function(muni){ %>
                    <option>
                      <%= muni.name %>
                    </option>
                    <% }); %>
                </select>
              </div>
            </div>
            <br />
            <div>
              <label for="direcc" class="formbold-form-label">Address</label>
              <input type="text" name="direcc" id="addressInput" placeholder="Flat 4, 24 Castle Street, Perth, PH1 3JY"
                class="formbold-form-input" required oninput="validateAddress()" onkeydown="checkTabOrClick(event)"
                onpaste="return false" />
              <!-- Mensaje de error si la dirección no es válida -->
              <p id="addressError" class="text-red-500 text-xs mt-1 hidden">
                Address field cannot be empty.
              </p>
            </div>
            <br />
            <div class="mb-4">
              <label for="email" class="formbold-form-label">Email</label>
              <input type="email" name="email" id="emailErrores" onblur="validateEmail()"
                class="w-full px-3 py-2 border rounded-md focus:outline-none focus:border-blue-500"
                placeholder="You@example.com" onpaste="return false" required />
              <!-- Mensaje de error si el correo electrónico no es válido -->
              <p id="emailError" class="text-red-500 text-xs mt-1 hidden">
                Please enter a valid email address.
              </p>
            </div>

            <br />
            <div>
              <label for="Password" class="formbold-form-label">Password</label>
              <input type="password" name="password" id="password" onchange="validatePass()"
                onkeydown="checkTabOrClick(event)"
                onkeypress="return (event.charCode == 209 || event.charCode == 241 || (event.charCode >= 48 && event.charCode <= 57) || (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122))"
                minlength="8" maxlength="20" placeholder="Minimum 8-digit password" class="formbold-form-input"
                onpaste="return false" required />
              <!-- Mensaje de error si la contraseña no es válida -->
              <p id="passErrorText" class="text-red-500 text-xs mt-1 hidden">
                Please enter a valid password, at least 8 characters.
              </p>
              <br />
            </div>
          </div>
          <!-------------------------------Fin Primera parte Datos personales------------------------------->
          <div class="formbold-form-step-2">
            <div>
              <label for="rutaine" class="formbold-form-label">Documents</label>
              <div class="formbold-form-confirm">
                <p>
                  Upload a photo of your INE.
                  <br>
                  Allowed documents: ".png" and ".jpg"
                </p>
              </div>
              <input type="file" name="img" id="rutaine" accept=".jpg,.png" class="formbold-form-input"
                onchange="validateFile()" required />
              <!-- Mensaje de error si el campo está vacío -->
              <p id="fileError" class="text-red-500 text-xs mt-1 hidden">
                Please upload a document.
              </p>
            </div>
          </div>

          <!-- Fin segunda parte-->
          <div class="formbold-form-step-3">
            <div class="formbold-form-confirm">
              <p>
                You agree to the terms and conditions of the site, and we
                reserve the right to use the data provided above.
              </p>

              <div>
                <button class="formbold-confirm-btn active">
                  <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="10.5" fill="white" stroke="#DDE3EC" />
                    <g clip-path="url(#clip0_1667_1314)">
                      <path
                        d="M9.83343 12.8509L15.1954 7.48828L16.0208 8.31311L9.83343 14.5005L6.12109 10.7882L6.94593 9.96336L9.83343 12.8509Z"
                        fill="#536387" />
                    </g>
                    <defs>
                      <clipPath id="clip0_1667_1314">
                        <rect width="14" height="14" fill="white" transform="translate(4 4)" />
                      </clipPath>
                    </defs>
                  </svg>
                  Yes! I agree.
                </button>

                <button class="formbold-back-btn-term active">
                  <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="10.5" fill="white" stroke="#DDE3EC" />
                    <g clip-path="url(#clip0_1667_1314)">
                      <path
                        d="M9.83343 12.8509L15.1954 7.48828L16.0208 8.31311L9.83343 14.5005L6.12109 10.7882L6.94593 9.96336L9.83343 12.8509Z"
                        fill="#536387" />
                    </g>
                    <defs>
                      <clipPath id="clip0_1667_1314">
                        <rect width="14" height="14" fill="white" transform="translate(4 4)" />
                      </clipPath>
                    </defs>
                  </svg>
                  No! Back.
                </button>
              </div>
            </div>
          </div>

          <!--Button Next-->
          <div class="formbold-form-btn-wrapper">
            <button class="formbold-back-btn">Back</button>

            <button class="formbold-btn">
              Next Step
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_1675_1807)">
                  <path
                    d="M10.7814 7.33312L7.20541 3.75712L8.14808 2.81445L13.3334 7.99979L8.14808 13.1851L7.20541 12.2425L10.7814 8.66645H2.66675V7.33312H10.7814Z"
                    fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0_1675_1807">
                    <rect width="16" height="16" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </button>
          </div>
      </form>
      <!--Fin Button Next-->
    </div>
  </div>
</body>

</html>

<!--Css referenciar a style.css-->
<style>
  @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: "Inter", sans-serif;
  }

  .formbold-main-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 48px;
  }

  .formbold-form-wrapper {
    margin: 0 auto;
    max-width: 550px;
    width: 100%;
    background: white;
  }

  .formbold-steps {
    padding-bottom: 18px;
    margin-bottom: 35px;
    border-bottom: 1px solid #dde3ec;
  }

  .formbold-steps ul {
    padding: 0;
    margin: 0;
    list-style: none;
    display: flex;
    gap: 40px;
  }

  .formbold-steps li {
    display: flex;
    align-items: center;
    gap: 14px;
    font-weight: 500;
    font-size: 16px;
    line-height: 24px;
    color: #536387;
  }

  .formbold-steps li span {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #dde3ec;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    font-weight: 500;
    font-size: 16px;
    line-height: 24px;
    color: #536387;
  }

  .formbold-steps li.active {
    color: #07074d;
  }

  .formbold-steps li.active span {
    background: #60a5fa;
    color: #ffffff;
  }

  .formbold-input-flex {
    display: flex;
    gap: 20px;
    margin-bottom: 22px;
  }

  .formbold-input-flex>div {
    width: 50%;
  }

  .formbold-form-input {
    width: 100%;
    padding: 13px 22px;
    border-radius: 5px;
    border: 1px solid #dde3ec;
    background: #ffffff;
    font-weight: 500;
    font-size: 16px;
    color: #536387;
    outline: none;
    resize: none;
  }

  .formbold-form-input:focus {
    border-color: #60a5fa;
    box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
  }

  .formbold-form-label {
    color: #07074d;
    font-weight: 500;
    font-size: 14px;
    line-height: 24px;
    display: block;
    margin-bottom: 10px;
  }

  .formbold-form-confirm {
    border-bottom: 1px solid #dde3ec;
    padding-bottom: 35px;
  }

  .formbold-form-confirm p {
    font-size: 16px;
    line-height: 24px;
    color: #536387;
    margin-bottom: 22px;
    width: 75%;
  }

  .formbold-form-confirm>div {
    display: flex;
    gap: 15px;
  }

  .formbold-confirm-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    background: #ffffff;
    border: 0.5px solid #dde3ec;
    border-radius: 5px;
    font-size: 16px;
    line-height: 24px;
    color: #536387;
    cursor: pointer;
    padding: 10px 20px;
    transition: all 0.3s ease-in-out;
  }

  .formbold-confirm-btn {
    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.12);
  }

  .formbold-confirm-btn.active {
    background: #60a5fa;
    color: #ffffff;
  }

  .formbold-back-btn-term {
    display: flex;
    align-items: center;
    gap: 10px;
    background: #ffffff;
    border: 0.5px solid #dde3ec;
    border-radius: 5px;
    font-size: 16px;
    line-height: 24px;
    color: #536387;
    cursor: pointer;
    padding: 10px 20px;
    transition: all 0.3s ease-in-out;
  }

  .formbold-back-btn-term {
    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.12);
  }

  .formbold-back-btn-term.active {
    color: #536387;
  }

  .formbold-form-step-1,
  .formbold-form-step-2,
  .formbold-form-step-3 {
    display: none;
  }

  .formbold-form-step-1.active,
  .formbold-form-step-2.active,
  .formbold-form-step-3.active {
    display: block;
  }

  .formbold-form-btn-wrapper {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 25px;
    margin-top: 25px;
  }

  .formbold-back-btn {
    cursor: pointer;
    background: #ffffff;
    border: none;
    color: #07074d;
    font-weight: 500;
    font-size: 16px;
    line-height: 24px;
    display: none;
  }

  .formbold-back-btn.active {
    display: block;
  }

  .formbold-btn {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 16px;
    border-radius: 5px;
    padding: 10px 25px;
    border: none;
    font-weight: 500;
    background-color: #60a5fa;
    color: white;
    cursor: pointer;
  }

  .formbold-btn:hover {
    box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
  }
</style>

<script>
  const stepMenuOne = document.querySelector(".formbold-step-menu1");
  const stepMenuTwo = document.querySelector(".formbold-step-menu2");
  const stepMenuThree = document.querySelector(".formbold-step-menu3");

  const stepOne = document.querySelector(".formbold-form-step-1");
  const stepTwo = document.querySelector(".formbold-form-step-2");
  const stepThree = document.querySelector(".formbold-form-step-3");

  const formSubmitBtn = document.querySelector(".formbold-btn");
  const formBackBtnTerm = document.querySelector(".formbold-back-btn-term");
  const formBackBtn = document.querySelector(".formbold-back-btn");

  //valida email
  function validateEmail() {
    const emailInputElement = document.getElementById("emailErrores");
    const emailErrorElement = document.getElementById("emailError");
    const inputValue = emailInputElement.value.trim();

    if (!inputValue) {
      emailErrorElement.textContent = "Email field cannot be empty.";
      emailErrorElement.classList.remove("hidden");
    } else {
      const isValid = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(inputValue);

      if (!isValid) {
        emailErrorElement.textContent = "Please enter a valid email address.";
        emailErrorElement.classList.remove("hidden");
      } else {
        emailErrorElement.classList.add("hidden");
      }
    }
  }

  function validateName() {
    const nameInputElement = document.getElementById("nameInput");
    const nameErrorElement = document.getElementById("nameErrores");
    const inputValue = nameInputElement.value.trim();

    if (inputValue === "") {
      nameErrorElement.classList.remove("hidden");
    } else {
      nameErrorElement.classList.add("hidden");
    }
  }

  function validateLastName() {
    const lastNameInputElement = document.getElementById("lastnameInput");
    const lastNameErrorElement = document.getElementById("lastnameErrores");
    const inputValue = lastNameInputElement.value.trim();

    if (inputValue === "") {
      lastNameErrorElement.classList.remove("hidden");
    } else {
      lastNameErrorElement.classList.add("hidden");
    }
  }

  function validateCurp() {
    const curpInputElement = document.getElementById("curp");
    const curpErrorElement = document.getElementById("curpError");
    const curpValue = curpInputElement.value.trim();

    if (curpValue.length !== 18) {
      curpErrorElement.classList.remove("hidden");
      curpInputElement.classList.add("error");

    } else {
      curpErrorElement.classList.add("hidden");
      curpInputElement.classList.remove("error");
    }

    return true;
  }

  function validateAddress() {
    const addressInputElement = document.getElementById("addressInput");
    const addressErrorElement = document.getElementById("addressError");
    const inputValue = addressInputElement.value.trim();

    if (inputValue == "") {
      addressErrorElement.textContent = "Address field cannot be empty.";
      addressErrorElement.classList.remove("hidden");
    } else {
      addressErrorElement.classList.add("hidden");
    }
  }

  function validatePass() {
    const passInputElement = document.getElementById("password");
    const passErrorElement = document.getElementById("passErrorText");
    const inputValue = passInputElement.value;
    const isValid = /^[\s\S]{8,20}$/.test(inputValue);

    if (!isValid || passInputElement.length <= 7) {
      passErrorElement.classList.remove("hidden");
    } else {
      passErrorElement.classList.add("hidden");
    }
  }

  function validatePhone() {
    const phoneInputElement = document.getElementById("phoneInput");
    const phoneErrorElement = document.getElementById("phoneError");
    const inputValue = phoneInputElement.value.trim();

    if (inputValue === "" || !/^\d{10}$/.test(inputValue)) {
      phoneErrorElement.classList.remove("hidden");
    } else {
      phoneErrorElement.classList.add("hidden");
    }
  }

  function validateFile() {
    const fileInputElement = document.getElementById("rutaine");
    const fileErrorElement = document.getElementById("fileError");

    if (!fileInputElement.files || fileInputElement.files.length === 0) {
      fileErrorElement.textContent = "No file selected.";
      fileErrorElement.classList.remove("hidden");
      return false;
    }

    const allowedExtensions = ["jpg", "png"];
    const fileName = fileInputElement.files[0].name;
    const fileExtension = fileName.split(".").pop();

    if (!allowedExtensions.includes(fileExtension.toLowerCase())) {
      fileErrorElement.textContent = "File extension must be .jpg or .png.";
      fileErrorElement.classList.remove("hidden");
      return false;
    }

    fileErrorElement.classList.add("hidden");
    return true;
  }


  // Add event listeners
  document.getElementById("emailErrores").addEventListener("blur", validateEmail);
  document.getElementById("nameInput").addEventListener("blur", validateName);
  document.getElementById("lastnameInput").addEventListener("blur", validateLastName);
  document.getElementById("curp").addEventListener("blur", validateCurp);
  document.getElementById("addressInput").addEventListener("blur", validateAddress);
  document.getElementById("password").addEventListener("blur", validatePass);
  document.getElementById("phoneInput").addEventListener("blur", validatePhone);
  document.getElementById("rutaine").addEventListener("change", validateFile);

  //
  formSubmitBtn.addEventListener("click", function (event) {
    event.preventDefault();
    if (stepMenuOne.className == "formbold-step-menu1 active") {
      event.preventDefault();

      stepMenuOne.classList.remove("active");
      stepMenuTwo.classList.add("active");

      stepOne.classList.remove("active");
      stepTwo.classList.add("active");

      formBackBtn.classList.add("active");
      formBackBtn.addEventListener("click", function (event) {
        event.preventDefault();

        stepMenuOne.classList.add("active");
        stepMenuTwo.classList.remove("active");

        stepOne.classList.add("active");
        stepTwo.classList.remove("active");

        formBackBtn.classList.remove("active");
      });
    } else if (stepMenuTwo.className == "formbold-step-menu2 active" && validateFile()) {
      event.preventDefault();

      stepMenuTwo.classList.remove("active");
      stepMenuThree.classList.add("active");

      stepTwo.classList.remove("active");
      stepThree.classList.add("active");

      formBackBtn.classList.remove("active");
      formBackBtnTerm.classList.add("active");
      formBackBtnTerm.addEventListener("click", function (event) {
        event.preventDefault();

        stepMenuTwo.classList.add("active");
        stepMenuThree.classList.remove("active");

        stepTwo.classList.add("active");
        stepThree.classList.remove("active");

        formBackBtn.classList.add("active");
        formSubmitBtn.textContent = "Next Step";
      });
      formSubmitBtn.textContent = "Submit";
    } else if (stepMenuThree.className == "formbold-step-menu3 active") {
      document.querySelector("form").submit();
    }
  });
</script>